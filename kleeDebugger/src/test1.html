<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D3.js Tree</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
    <pre id="json-output"></pre>
    <div id="dataContainer"></div>
    <script>
        function findRootNode(data) {
            const allChildren = data.flatMap(item => item.children);
            console.log(allChildren);
            return data.find(item => !allChildren.includes(item.name));
        }

        const jsonData = [
            {
                "children":
                    [
                        "0x55ac5f2ab170",
                        "0x55ac5f2ab200"
                    ],
                "constraints": [],
                "name": "0x55ac5f2aac00"
            },
            {
                "children": [],
                "constraints":
                    [
                        "(Eq 0 (ReadLSB w32 0 a))"
                    ],
                "name": "0x55ac5f2ab200"
            },
            {
                "children":
                    [
                        "0x55ac5f2ab6b0",
                        "0x55ac5f2ab350"
                    ],
                "constraints":
                    [
                        "(Eq false (Eq 0 (ReadLSB w32 0 a)))"
                    ],
                "name": "0x55ac5f2ab170"
            },
            {
                "children": [],
                "constraints":
                    [
                        "(Eq false (Eq 0 (ReadLSB w32 0 a)))",
                        "(Slt (ReadLSB w32 0 a) 0)"
                    ],
                "name": "0x55ac5f2ab350"
            },
            {
                "children": [],
                "constraints":
                    [
                        "(Eq false (Eq 0 (ReadLSB w32 0 a)))",
                        "(Eq false (Slt (ReadLSB w32 0 a) 0))"
                    ],
                "name": "0x55ac5f2ab6b0"
            }
        ]
        const rootNode = findRootNode(jsonData);
        console.log(rootNode);

        function buildRecursiveStructure(data, name) {
            const node = data.find(item => item.name === name);
            if (!node) {
                return null;
            }
            const children = node.children.map(childName => buildRecursiveStructure(data, childName));
            return {
                ...node,
                children,
            };
        }
        const recursiveData = buildRecursiveStructure(jsonData, rootNode.name);
        console.log(recursiveData);

    </script>
</body>

</html>